<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ì‹œê°„í‘œ ìƒì„±ê¸° - ë°ëª¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .course-card {
            transition: all 0.3s ease;
        }
        .course-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .selected {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
        .timetable-grid {
            display: grid;
            grid-template-columns: 80px repeat(5, 1fr);
            gap: 1px;
            background-color: #e5e7eb;
        }
        .timetable-cell {
            background-color: white;
            min-height: 60px;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .timetable-header {
            background-color: #f3f4f6;
            font-weight: 600;
            color: #374151;
        }
        .course-slot {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                âš¡ ìŠ¤ë§ˆíŠ¸ ì‹œê°„í‘œ ìƒì„±ê¸°
            </h1>
            <p class="text-lg text-gray-600">
                ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ì„ ë¶„ì„í•˜ì—¬ ìµœì ì˜ ì‹œê°„í‘œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤
            </p>
        </div>

        <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- ì¢Œì¸¡: ê³¼ëª© ì„ íƒ -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        ğŸ“š ìˆ˜ê°• ê°€ëŠ¥ ê³¼ëª©
                    </h3>
                    
                    <!-- ê²€ìƒ‰ -->
                    <div class="mb-4">
                        <input type="text" id="searchInput" placeholder="ê³¼ëª©ëª…, ì½”ë“œ, êµìˆ˜ëª…ìœ¼ë¡œ ê²€ìƒ‰..."
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <!-- ê³¼ëª© ëª©ë¡ -->
                    <div class="space-y-3 max-h-96 overflow-y-auto" id="courseList">
                        <!-- ê³¼ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>

                    <!-- ì„ íƒëœ ê³¼ëª© ìš”ì•½ -->
                    <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">
                            ì´ <span id="selectedCount">0</span>ê°œ ê³¼ëª© ì„ íƒë¨
                            <span class="ml-2 text-blue-600 font-medium">
                                (<span id="totalCredits">0</span>í•™ì )
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ìš°ì¸¡: ì„ íƒëœ ê³¼ëª© ë° ì‹œê°„í‘œ ìƒì„± -->
            <div class="lg:col-span-2">
                <!-- ì„ íƒëœ ê³¼ëª© ëª©ë¡ -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        ì„ íƒëœ ê³¼ëª© (<span id="selectedCount2">0</span>ê°œ)
                    </h3>
                    <div class="space-y-2 mb-6" id="selectedCoursesList">
                        <!-- ì„ íƒëœ ê³¼ëª©ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                    <button onclick="generateTimetable()" id="generateBtn"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
                        âš¡ ìµœì  ì‹œê°„í‘œ ìƒì„±
                    </button>
                </div>

                <!-- ìƒì„±ëœ ì‹œê°„í‘œ -->
                <div class="bg-white rounded-lg shadow-lg p-6" id="timetableSection" style="display: none;">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        ìƒì„±ëœ ì‹œê°„í‘œ
                    </h3>
                    <div class="timetable-grid" id="timetableGrid">
                        <!-- ì‹œê°„í‘œ ê·¸ë¦¬ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ê³¼ëª© ë°ì´í„°
        const courses = [
            {
                id: '1',
                name: 'ìë£Œêµ¬ì¡°',
                code: 'CS101',
                professor: 'ê¹€êµìˆ˜',
                credit: 3,
                priority: 8,
                isRequired: true,
                timeSlots: [
                    { day: 'ì›”', startTime: '09:00', endTime: '10:30', room: 'A101' },
                    { day: 'ìˆ˜', startTime: '09:00', endTime: '10:30', room: 'A101' }
                ]
            },
            {
                id: '2',
                name: 'ì•Œê³ ë¦¬ì¦˜',
                code: 'CS102',
                professor: 'ì´êµìˆ˜',
                credit: 3,
                priority: 7,
                isRequired: true,
                timeSlots: [
                    { day: 'í™”', startTime: '11:00', endTime: '12:30', room: 'B201' },
                    { day: 'ëª©', startTime: '11:00', endTime: '12:30', room: 'B201' }
                ]
            },
            {
                id: '3',
                name: 'ë°ì´í„°ë² ì´ìŠ¤',
                code: 'CS103',
                professor: 'ë°•êµìˆ˜',
                credit: 3,
                priority: 6,
                isRequired: false,
                timeSlots: [
                    { day: 'ì›”', startTime: '14:00', endTime: '15:30', room: 'C301' },
                    { day: 'ìˆ˜', startTime: '14:00', endTime: '15:30', room: 'C301' }
                ]
            },
            {
                id: '4',
                name: 'ì›¹í”„ë¡œê·¸ë˜ë°',
                code: 'CS104',
                professor: 'ìµœêµìˆ˜',
                credit: 3,
                priority: 5,
                isRequired: false,
                timeSlots: [
                    { day: 'í™”', startTime: '16:00', endTime: '17:30', room: 'D401' },
                    { day: 'ëª©', startTime: '16:00', endTime: '17:30', room: 'D401' }
                ]
            },
            {
                id: '5',
                name: 'ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬',
                code: 'CS105',
                professor: 'ì •êµìˆ˜',
                credit: 3,
                priority: 4,
                isRequired: false,
                timeSlots: [
                    { day: 'ê¸ˆ', startTime: '10:00', endTime: '11:30', room: 'E501' },
                    { day: 'ê¸ˆ', startTime: '12:00', endTime: '13:30', room: 'E501' }
                ]
            }
        ];

        let selectedCourses = [];
        let filteredCourses = [...courses];

        // ì‹œê°„í‘œ ê·¸ë¦¬ë“œ ìƒì„±
        function createTimetableGrid() {
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'];
            const timeSlots = [
                { time: '09:00', label: '1êµì‹œ' },
                { time: '10:30', label: '2êµì‹œ' },
                { time: '12:00', label: '3êµì‹œ' },
                { time: '13:30', label: '4êµì‹œ' },
                { time: '15:00', label: '5êµì‹œ' },
                { time: '16:30', label: '6êµì‹œ' },
                { time: '18:00', label: '7êµì‹œ' }
            ];

            let gridHTML = `
                <div class="timetable-header timetable-cell">ì‹œê°„</div>
                ${days.map(day => `<div class="timetable-header timetable-cell">${day}ìš”ì¼</div>`).join('')}
            `;

            timeSlots.forEach((timeSlot, rowIndex) => {
                gridHTML += `<div class="timetable-header timetable-cell">
                    <div>${timeSlot.time}</div>
                    <div class="text-xs text-gray-500">${timeSlot.label}</div>
                </div>`;
                
                days.forEach(day => {
                    const courseSlot = findCourseAtTime(day, timeSlot.time);
                    gridHTML += `<div class="timetable-cell">
                        ${courseSlot ? `
                            <div class="course-slot">
                                <div class="font-medium">${courseSlot.name}</div>
                                <div class="text-xs opacity-75">${courseSlot.professor}</div>
                                <div class="text-xs opacity-75">${courseSlot.room}</div>
                            </div>
                        ` : '-'}
                    </div>`;
                });
            });

            document.getElementById('timetableGrid').innerHTML = gridHTML;
        }

        // íŠ¹ì • ì‹œê°„ëŒ€ì— ìˆ˜ì—…ì´ ìˆëŠ”ì§€ ì°¾ê¸°
        function findCourseAtTime(day, time) {
            for (let course of selectedCourses) {
                for (let slot of course.timeSlots) {
                    if (slot.day === day && slot.startTime === time) {
                        return {
                            name: course.name,
                            professor: course.professor,
                            room: slot.room
                        };
                    }
                }
            }
            return null;
        }

        // ê³¼ëª© ì„ íƒ/í•´ì œ
        function toggleCourse(courseId) {
            const course = courses.find(c => c.id === courseId);
            const index = selectedCourses.findIndex(c => c.id === courseId);
            
            if (index === -1) {
                selectedCourses.push(course);
            } else {
                selectedCourses.splice(index, 1);
            }
            
            renderCourses();
            renderSelectedCourses();
            updateCounts();
        }

        // ê³¼ëª© ëª©ë¡ ë Œë”ë§
        function renderCourses() {
            const courseList = document.getElementById('courseList');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            filteredCourses = courses.filter(course => 
                course.name.toLowerCase().includes(searchTerm) ||
                course.code.toLowerCase().includes(searchTerm) ||
                course.professor.toLowerCase().includes(searchTerm)
            );

            courseList.innerHTML = filteredCourses.map(course => {
                const isSelected = selectedCourses.some(c => c.id === course.id);
                return `
                    <div class="course-card p-3 border rounded-lg cursor-pointer ${isSelected ? 'selected' : ''}"
                         onclick="toggleCourse('${course.id}')">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-1">
                                    <h4 class="font-medium">${course.name}</h4>
                                    ${course.isRequired ? '<span class="ml-2 px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full">í•„ìˆ˜</span>' : ''}
                                </div>
                                <div class="text-sm text-gray-600 mb-2">
                                    ${course.code} â€¢ ${course.professor} â€¢ ${course.credit}í•™ì 
                                </div>
                                <div class="space-y-1">
                                    ${course.timeSlots.map(slot => `
                                        <div class="text-xs text-gray-500">
                                            ğŸ• ${slot.day} ${slot.startTime}-${slot.endTime} ğŸ“ ${slot.room}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-600 mb-2">
                                    â­ ${course.priority}
                                </div>
                                <div class="w-4 h-4 rounded border-2 ${isSelected ? 'bg-blue-600 border-blue-600' : 'border-gray-300'}">
                                    ${isSelected ? '<div class="w-full h-full flex items-center justify-center"><div class="w-2 h-2 bg-white rounded-full"></div></div>' : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì„ íƒëœ ê³¼ëª© ëª©ë¡ ë Œë”ë§
        function renderSelectedCourses() {
            const selectedList = document.getElementById('selectedCoursesList');
            selectedList.innerHTML = selectedCourses.map(course => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <div>
                        <span class="font-medium">${course.name}</span>
                        <span class="text-sm text-gray-500 ml-2">
                            (${course.code}) - ${course.credit}í•™ì 
                        </span>
                    </div>
                    <span class="text-sm text-blue-600">
                        ìš°ì„ ìˆœìœ„: ${course.priority}
                    </span>
                </div>
            `).join('');
        }

        // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
        function updateCounts() {
            const count = selectedCourses.length;
            const credits = selectedCourses.reduce((sum, course) => sum + course.credit, 0);
            
            document.getElementById('selectedCount').textContent = count;
            document.getElementById('selectedCount2').textContent = count;
            document.getElementById('totalCredits').textContent = credits;
            
            document.getElementById('generateBtn').disabled = count === 0;
        }

        // ì‹œê°„í‘œ ìƒì„±
        function generateTimetable() {
            if (selectedCourses.length === 0) {
                alert('ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ê³¼ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¶©ëŒ ê²€ì‚¬
            const conflicts = checkConflicts(selectedCourses);
            
            if (conflicts.length > 0) {
                alert(`ì‹œê°„ ì¶©ëŒì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤:\n${conflicts.map(c => c.courses.map(course => course.name).join(', ')).join('\n')}`);
                return;
            }

            // ì‹œê°„í‘œ í‘œì‹œ
            document.getElementById('timetableSection').style.display = 'block';
            createTimetableGrid();
            
            alert('ì‹œê°„í‘œê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì¶©ëŒ ê²€ì‚¬
        function checkConflicts(courses) {
            const conflicts = [];
            
            for (let i = 0; i < courses.length; i++) {
                for (let j = i + 1; j < courses.length; j++) {
                    const course1 = courses[i];
                    const course2 = courses[j];
                    
                    for (const slot1 of course1.timeSlots) {
                        for (const slot2 of course2.timeSlots) {
                            if (slot1.day === slot2.day && 
                                slot1.startTime === slot2.startTime && 
                                slot1.endTime === slot2.endTime) {
                                conflicts.push({
                                    courses: [course1, course2],
                                    timeSlot: slot1
                                });
                            }
                        }
                    }
                }
            }
            
            return conflicts;
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        document.getElementById('searchInput').addEventListener('input', renderCourses);

        // ì´ˆê¸° ë Œë”ë§
        renderCourses();
        updateCounts();
    </script>
</body>
</html>

